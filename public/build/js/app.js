let step=1;const initialStep=1,lastStep=3,apointment={name:"",date:"",hour:"",services:[]};function startApp(){showSection(),paginationButtons(),tabs(),previousSection(),nextSection(),queryAPI(),clientName(),apointmentDate()}function showSection(){const e=document.querySelector(".show");e&&e.classList.remove("show");const t="#step-"+step;document.querySelector(t).classList.add("show");const n=document.querySelector(".current");n&&n.classList.remove("current");const s=`[data-step="${step}"]`;document.querySelector(s).classList.add("current")}function tabs(){document.querySelectorAll(".tabs button").forEach(e=>{e.addEventListener("click",e=>{step=parseInt(e.target.dataset.step),showSection(),paginationButtons()})})}function paginationButtons(){const e=document.querySelector("#next"),t=document.querySelector("#previous");switch(step){case 1:t.classList.add("hide"),e.classList.remove("hide");break;case 3:e.classList.add("hide"),t.classList.remove("hide");break;default:e.classList.remove("hide"),t.classList.remove("hide")}e.addEventListener("click",()=>{}),t.addEventListener("click",()=>{})}function previousSection(){document.querySelector("#previous").addEventListener("click",()=>{step<=1||(step--,paginationButtons(),showSection())})}function nextSection(){document.querySelector("#next").addEventListener("click",()=>{step>=3||(step++,paginationButtons(),showSection())})}async function queryAPI(){try{const e="http://localhost:3000/api/services",t=await fetch(e);showServices(await t.json())}catch(e){console.log(e)}}function showServices(e){e.forEach(e=>{const{id:t,name:n,price:s}=e,c=document.createElement("P");c.classList.add("service-name"),c.textContent=n;const o=document.createElement("P");o.classList.add("service-price"),o.textContent=s+"â‚¬";const i=document.createElement("DIV");i.classList.add("service"),i.dataset.serviceId=t,i.onclick=function(){selectService(e)},i.appendChild(c),i.appendChild(o),document.querySelector("#services").appendChild(i)})}function selectService(e){const{id:t}=e,{services:n}=apointment,s=document.querySelector(`[data-service-id="${t}"]`);n.some(t=>t.id===e.id)?(apointment.services=n.filter(e=>e.id!==t),s.classList.remove("selected")):(apointment.services=[...n,e],s.classList.add("selected"))}function clientName(){apointment.name=document.querySelector("#name").value}function apointmentDate(){document.querySelector("#date").addEventListener("input",e=>{const t=new Date(e.target.value).getUTCDay();[0].includes(t)?(e.target.value="",showAlert("You can't select Sundays","error")):apointment.date=e.target.value})}function showAlert(e,t){if(document.querySelector(".error"))return;const n=document.createElement("DIV"),s=document.querySelector(".form");n.textContent=e,n.classList.add(t),s.appendChild(n),console.log(s),setTimeout(()=>{n.remove()},3e3)}document.addEventListener("DOMContentLoaded",()=>{startApp()});